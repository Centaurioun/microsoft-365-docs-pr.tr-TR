---
title: Kötü amaçlı yazılımdan koruma ilkelerini yapılandırma
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.localizationpriority: medium
search.appverid:
- MET150
ms.assetid: b0cfc21f-e3c6-41b6-8670-feb2b2e252e5
ms.collection:
- M365-security-compliance
- m365initiative-defender-office365
description: Yöneticiler, Exchange Online Protection(EOP) içinde kötü amaçlı yazılımdan koruma ilkelerini görüntülemeyi, oluşturmayı, değiştirmeyi ve kaldırmayı öğrenebilir.
ms.custom:
- seo-marvel-apr2020
ms.technology: mdo
ms.prod: m365-security
ms.openlocfilehash: 742e32188b3b8baaad3615d8f1a90b5f09fb2dbb
ms.sourcegitcommit: d1b60ed9a11f5e6e35fbaf30ecaeb9dfd6dd197d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/29/2022
ms.locfileid: "66492303"
---
# <a name="configure-anti-malware-policies-in-eop"></a>EOP'de kötü amaçlı yazılımdan koruma ilkelerini yapılandırma

[!INCLUDE [MDO Trial banner](../includes/mdo-trial-banner.md)]

**Uygulandığı öğe**
- [Exchange Online Protection](exchange-online-protection-overview.md)
- [Office 365 için Microsoft Defender plan 1 ve plan 2](defender-for-office-365.md)
- [Microsoft 365 Defender](../defender/microsoft-365-defender.md)

posta kutuları olmayan Exchange Online veya tek başına Exchange Online Protection (EOP) kuruluşlarında posta kutuları olan Microsoft 365 Exchange Online kuruluşlarında, e-posta iletileri EOP tarafından kötü amaçlı yazılımlara karşı otomatik olarak korunur. EOP, kötü amaçlı yazılımdan koruma ayarları için kötü amaçlı yazılımdan koruma ilkelerini kullanır. Daha fazla bilgi için bkz [. Kötü amaçlı yazılımdan koruma](anti-malware-protection.md).

Yöneticiler, kuruluşlarının gereksinimlerini karşılamak için varsayılan kötü amaçlı yazılımdan koruma ilkesini görüntüleyebilir, düzenleyebilir ve yapılandırabilir (ancak silemez). Daha fazla ayrıntı düzeyi için, kuruluşunuzdaki belirli kullanıcılar, gruplar veya etki alanları için geçerli olan özel kötü amaçlı yazılımdan koruma ilkeleri de oluşturabilirsiniz. Özel ilkeler her zaman varsayılan ilkeden önceliklidir, ancak özel ilkelerinizin önceliğini (çalıştırma sırasını) değiştirebilirsiniz.

Kötü amaçlı yazılımdan koruma ilkelerini Microsoft 365 Defender portalında veya PowerShell'de yapılandırabilirsiniz (Exchange Online posta kutuları olan Microsoft 365 kuruluşları için PowerShell Exchange Online; Exchange Online posta kutusu olmayan kuruluşlar için tek başına EOP PowerShell).

## <a name="what-do-you-need-to-know-before-you-begin"></a>Başlamadan önce bilmeniz gerekenler

- Microsoft 365 Defender portalını adresinde <https://security.microsoft.com>açarsınız. **Kötü amaçlı yazılımdan koruma** sayfasına doğrudan gitmek için kullanın<https://security.microsoft.com/antimalwarev2>.

- Exchange Online PowerShell'e bağlanmak için bkz[. Exchange Online PowerShell'e bağlanma](/powershell/exchange/connect-to-exchange-online-powershell). Tek başına EOP PowerShell'e bağlanmak için bkz. [Exchange Online Protection PowerShell'e bağlanma](/powershell/exchange/connect-to-exchange-online-protection-powershell).

- Bu makaledeki yordamları gerçekleştirebilmeniz için **önce Exchange Online'de** izinlerin atanmış olması gerekir:
  - Kötü amaçlı yazılımdan koruma ilkeleri eklemek, değiştirmek ve silmek için **Kuruluş Yönetimi** veya **Güvenlik Yöneticisi** rol gruplarının üyesi olmanız gerekir.
  - Kötü amaçlı yazılımdan koruma ilkelerine salt okunur erişim için **Genel Okuyucu** veya **Güvenlik Okuyucusu** rol gruplarının üyesi olmanız gerekir.

  Daha fazla bilgi için bkz. [Exchange Online'de İzinler](/exchange/permissions-exo/permissions-exo).

  **Notlar**:

  - kullanıcıları Microsoft 365 yönetim merkezi ilgili Azure Active Directory rolüne eklemek, kullanıcılara Microsoft 365'teki diğer özellikler için gerekli izinleri _ve_ izinleri verir. Daha fazla bilgi için bkz. [Yönetici rolleri hakkında](../../admin/add-users/about-admin-roles.md).
  - [Exchange Online'daki](/Exchange/permissions-exo/permissions-exo#role-groups) **Yalnızca Görüntüleme Kuruluş Yönetimi** rol grubu da özelliğe salt okunur erişim sağlar.

- Kötü amaçlı yazılımdan koruma ilkeleri için önerilen ayarlarımız için bkz. [EOP kötü amaçlı yazılımdan koruma ilkesi ayarları](recommended-settings-for-eop-and-office365.md#eop-anti-malware-policy-settings).

## <a name="use-the-microsoft-365-defender-portal-to-create-anti-malware-policies"></a>Kötü amaçlı yazılımdan koruma ilkeleri oluşturmak için Microsoft 365 Defender portalını kullanma

Microsoft 365 Defender portalında özel bir kötü amaçlı yazılımdan koruma ilkesi oluşturmak, her ikisi için de aynı adı kullanarak kötü amaçlı yazılım filtresi kuralını ve ilişkili kötü amaçlı yazılım filtresi ilkesini aynı anda oluşturur.

1. konumundaki Microsoft 365 Defender portalında<https://security.microsoft.com>, **İlkeler** bölümünde **e-posta & İşbirliği** \> **İlkeleri & Kurallar** \> **Tehdit İlkeleri** **Kötü Amaçlı Yazılımdan Koruma'ya** \> gidin. **Kötü amaçlı yazılımdan koruma** sayfasına doğrudan gitmek için kullanın<https://security.microsoft.com/antimalwarev2>.

2. **Kötü amaçlı yazılımdan koruma** sayfasında Oluştur simgesine tıklayın![.](../../media/m365-cc-sc-create-icon.png) **Oluştur'u seçin**.

3. İlke sihirbazı açılır. **İlkenizi adlandırın** sayfasında şu ayarları yapılandırın:
   - **Ad**: İlke için benzersiz, açıklayıcı bir ad girin.
   - **Açıklama**: İlke için isteğe bağlı bir açıklama girin.

   İşiniz bittiğinde **İleri'ye** tıklayın.

4. **Kullanıcılar ve etki alanları** sayfasında, ilkenin geçerli olduğu iç alıcıları tanımlayın (alıcı koşulları):
   - **Kullanıcılar**: Belirtilen posta kutuları, posta kullanıcıları veya posta kişileri.
   - **Gruplar**:
     - Belirtilen dağıtım gruplarının veya posta özellikli güvenlik gruplarının üyeleri.
     - Belirtilen Microsoft 365 Grupları.
   - **Etki alanları**: Kuruluşunuzda belirtilen [kabul edilen etki alanlarındaki](/exchange/mail-flow-best-practices/manage-accepted-domains/manage-accepted-domains) tüm alıcılar.

   Uygun kutuya tıklayın, bir değer yazmaya başlayın ve sonuçlardan istediğiniz değeri seçin. Bu işlemi gerektiği kadar tekrarlayın. Mevcut bir değeri kaldırmak için Kaldır'a tıklayın ![Kaldır simgesi.](../../media/m365-cc-sc-remove-selection-icon.png) öğesini seçin.

   Kullanıcılar veya gruplar için çoğu tanımlayıcıyı (ad, görünen ad, diğer ad, e-posta adresi, hesap adı vb.) kullanabilirsiniz, ancak sonuçlarda ilgili görünen ad gösterilir. Kullanıcılar için, tüm kullanılabilir değerleri görmek için tek başına bir yıldız işareti (\*) girin.

   Aynı koşuldaki birden çok değer OR mantığını kullanır (örneğin, _\<recipient1\>_ veya _\<recipient2\>_). Farklı koşullar AND mantığını kullanır (örneğin, _\<recipient1\>_ ve _\<member of group 1\>_).

   - **Bu kullanıcıları, grupları ve etki alanlarını dışlayın**: İlkenin geçerli olduğu iç alıcılara özel durumlar eklemek için (alıcı özel durumları), bu seçeneği belirleyin ve özel durumları yapılandırın. Ayarlar ve davranış, koşullara tam olarak benzer.

   > [!IMPORTANT]
   > Birden çok farklı koşul veya özel durum ek değildir; Onlar kapsayıcı. İlke _yalnızca_ belirtilen alıcı filtrelerinin _tümüyle_ eşleşen alıcılara uygulanır. Örneğin, ilkede aşağıdaki değerlerle bir alıcı filtresi koşulu yapılandırabilirsiniz:
   >
   > - Alıcı: romain@contoso.com
   > - Alıcı şu üyelerin üyesidir: Yöneticiler
   >
   > İlke, _romain@contoso.com yalnızca_ Yönetici gruplarının da üyesiyse uygulanır. Grubun üyesi değilse ilke ona uygulanmaz.
   >
   > Benzer şekilde, ilkenin özel durumu olarak aynı alıcı filtresini kullanırsanız, ilke _romain@contoso.com yalnızca_ Yöneticiler gruplarının da üyesiyse uygulanmaz. Grubun üyesi değilse, ilke hala onun için geçerlidir.

   İşiniz bittiğinde **İleri'ye** tıklayın.

5. **Koruma ayarları** sayfasında aşağıdaki ayarları yapılandırın:

   - **Ortak ekler filtresini etkinleştirin**: Bu seçeneği kullanırsanız, belirtilen eklere sahip iletiler kötü amaçlı yazılım olarak değerlendirilir ve otomatik olarak karantinaya alınır. **Dosya türlerini özelleştir'e** tıklayıp listedeki değerleri seçerek veya listeden seçimlerini kaldırarak listeyi değiştirebilirsiniz.

     Varsayılan ve kullanılabilir değerler için bkz. [Kötü amaçlı yazılımdan koruma ilkeleri](anti-malware-protection.md#anti-malware-policies).

     **Bu türler bulunduğunda**: Aşağıdaki değerlerden birini seçin:

     - **İletiyi teslim edilmedi raporuyla (NDR) reddet (** bu varsayılan değerdir)
     - **İletiyi karantinaya al**

   - **Kötü amaçlı yazılımlar için sıfır saatlik otomatik temizlemeyi etkinleştirin**: Bu seçeneği seçerseniz, ZAP zaten teslim edilmiş kötü amaçlı yazılım iletilerini karantinaya alır. Daha fazla bilgi için bkz. [Exchange Online'da Sıfır saat otomatik temizleme (ZAP).](zero-hour-auto-purge.md)

   - **Karantina ilkesi**: Kötü amaçlı yazılım olarak karantinaya alınan iletilere uygulanan karantina ilkesini seçin. Karantina ilkeleri, kullanıcıların karantinaya alınan iletilere neler yapabileceğini ve kullanıcıların karantina bildirimleri alıp almayacağını tanımlar. Daha fazla bilgi için bkz [. Karantina ilkeleri](quarantine-policies.md).

     Boş değer, varsayılan karantina ilkesinin kullanıldığı anlamına gelir (kötü amaçlı yazılım algılamaları için AdminOnlyAccessPolicy). Daha sonra kötü amaçlı yazılımdan koruma ilkesini düzenlediğinizde veya ayarları görüntülediğinizde varsayılan karantina ilkesi adı gösterilir. Desteklenen koruma filtreleme kararları için kullanılan varsayılan karantina ilkeleri hakkında daha fazla bilgi için [bu tabloya](quarantine-policies.md#step-2-assign-a-quarantine-policy-to-supported-features) bakın.

     > [!NOTE]
     > Karantina ilkesi, alıcıların kötü amaçlı yazılım olarak karantinaya alınan iletiler için e-posta bildirimleri alıp almadığını belirler. Karantina bildirimleri AdminOnlyAccessPolicy'de devre dışı bırakıldığından, bildirimlerin açık olduğu özel bir karantina ilkesi oluşturmanız ve atamanız gerekir. Daha fazla bilgi için bkz [. Karantina ilkeleri](quarantine-policies.md).
     >
     > Kullanıcılar, kötü amaçlı yazılım olarak karantinaya alınan kendi iletilerini yayınlayamaz. Yöneticiler en iyi durumda karantina ilkesini yapılandırarak kullanıcıların karantinaya alınan kötü amaçlı yazılım iletilerinin yayınlanmasını isteyebilir.

   - **Yönetici bildirimleri**: Aşağıdaki seçeneklerden hiçbirini, birini veya ikisini birden seçin:

       - **İç gönderenlerden gelen teslim edilmemiş iletileri yöneticiye bildirin**: Bu seçeneği belirlerseniz, görüntülenen **Yönetici e-posta adresi kutusuna bir alıcı e-posta adresi** girin.

       - **Dış gönderenlerden gelen teslim edilmemiş iletiler hakkında yöneticiyi bilgilendirin**: Bu seçeneği belirlerseniz, görüntülenen **Yönetici e-posta adresi kutusuna bir alıcı e-posta adresi** girin.

     > [!NOTE]
     > Yönetici bildirimleri yalnızca kötü amaçlı yazılım olarak sınıflandırılan _ekler_ için gönderilir.

   - **Bildirimleri özelleştirme**: Yönetici bildirimleri için kullanılan ileti özelliklerini özelleştirmek için bu bölümdeki ayarları kullanın.

       - **Özelleştirilmiş bildirim metnini kullan**: Bu seçeneği belirlerseniz, gönderenin adını ve yönetici bildirim iletileri için e-posta adresini belirtmek üzere **Kimden** adı ve **Kimden adresi** kutularını kullanın.

       - **İç gönderenlerden gelen iletiler için bildirimleri özelleştirme**: Daha önce **yöneticiye iç gönderenlerden gelen teslim edilmemiş iletiler hakkında bilgi ver'i** seçtiyseniz, yönetici bildirim iletilerinin konusunu ve ileti gövdesini belirtmek için **Konu** ve **İleti** kutularını kullanın.

       - **Dış gönderenlerden gelen iletiler için bildirimleri özelleştirme**: Daha önce **Bir yöneticiye dış gönderenlerden gelen teslim edilmemiş iletiler hakkında bilgi ver'i** seçtiyseniz, yönetici bildirim iletilerinin konusunu ve ileti gövdesini belirtmek için **Konu** ve **İleti** kutularını kullanmanız gerekir.

   İşiniz bittiğinde **İleri'ye** tıklayın.

6. **Gözden Geçir** sayfasında ayarlarınızı gözden geçirin. Bölümün içindeki ayarları değiştirmek için her bölümde **Düzenle'yi** seçebilirsiniz. Ya da **Geri'ye** tıklayabilir veya sihirbazdaki belirli bir sayfayı seçebilirsiniz.

   İşiniz bittiğinde **Gönder'e** tıklayın.

7. Görüntülenen onay sayfasında **Bitti'ye** tıklayın.

## <a name="use-the-microsoft-365-defender-portal-to-view-anti-malware-policies"></a>Kötü amaçlı yazılımdan koruma ilkelerini görüntülemek için Microsoft 365 Defender portalını kullanma

1. konumundaki Microsoft 365 Defender portalında<https://security.microsoft.com>, **İlkeler** bölümünde **e-posta & İşbirliği** \> **İlkeleri & Kurallar** \> **Tehdit İlkeleri** **Kötü Amaçlı Yazılımdan Koruma'ya** \> gidin. **Kötü amaçlı yazılımdan koruma** sayfasına doğrudan gitmek için kullanın<https://security.microsoft.com/antimalwarev2>.

2. **Kötü amaçlı yazılımdan koruma sayfasında, kötü amaçlı yazılımdan** koruma ilkeleri listesinde aşağıdaki özellikler görüntülenir:
   - **Ad**
   - **Durum**
   - **Öncelik**

3. Ada tıklayarak bir ilke seçtiğinizde, ilke ayarları açılır öğede görüntülenir.

## <a name="use-the-microsoft-365-defender-portal-to-modify-anti-malware-policies"></a>Kötü amaçlı yazılımdan koruma ilkelerini değiştirmek için Microsoft 365 Defender portalını kullanma

1. konumundaki Microsoft 365 Defender portalında<https://security.microsoft.com>, **İlkeler** bölümünde **e-posta & İşbirliği** \> **İlkeleri & Kurallar** \> **Tehdit İlkeleri** **Kötü Amaçlı Yazılımdan Koruma'ya** \> gidin. **Kötü amaçlı yazılımdan koruma** sayfasına doğrudan gitmek için kullanın<https://security.microsoft.com/antimalwarev2>.

2. **Kötü amaçlı yazılımdan koruma** sayfasında, ada tıklayarak listeden bir ilke seçin.

3. Görüntülenen ilke ayrıntıları açılır öğesinde, bölümdeki ayarları değiştirmek için her bölümde **Düzenle'yi** seçin. Ayarlar hakkında daha fazla bilgi için bu [makalenin önceki Kötü amaçlı yazılımdan koruma ilkeleri oluşturmak için Microsoft 365 Defender portalını kullanma](#use-the-microsoft-365-defender-portal-to-create-anti-malware-policies) bölümüne bakın.

   Varsayılan kötü amaçlı yazılımdan koruma ilkesi için **Kullanıcılar, gruplar ve etki alanları** bölümü kullanılamaz (ilke herkes için geçerlidir) ve ilkeyi yeniden adlandıramazsınız.

bir ilkeyi etkinleştirmek veya devre dışı bırakmak ya da ilke öncelik sırasını ayarlamak için aşağıdaki bölümlere bakın.

### <a name="enable-or-disable-custom-anti-malware-policies"></a>Özel kötü amaçlı yazılımdan koruma ilkelerini etkinleştirme veya devre dışı bırakma

Varsayılan kötü amaçlı yazılımdan koruma ilkesini devre dışı bırakamazsınız.

1. konumundaki Microsoft 365 Defender portalında<https://security.microsoft.com>, **İlkeler** bölümünde **e-posta & İşbirliği** \> **İlkeleri & Kurallar** \> **Tehdit İlkeleri** **Kötü Amaçlı Yazılımdan Koruma'ya** \> gidin. **Kötü amaçlı yazılımdan koruma** sayfasına doğrudan gitmek için kullanın<https://security.microsoft.com/antimalwarev2>.

2. **Kötü amaçlı yazılımdan koruma** sayfasında, ada tıklayarak listeden bir özel ilke seçin.

3. Görüntülenen ilke ayrıntıları açılır öğesinin en üstünde aşağıdaki değerlerden birini görürsünüz:
   - **İlke kapalı**: İlkeyi açmak için Aç simgesine tıklayın ![.](../../media/m365-cc-sc-turn-on-off-icon.png) **seçeneğini açın** .
   - **İlke açık**: İlkeyi kapatmak için Kapat simgesine tıklayın ![.](../../media/m365-cc-sc-turn-on-off-icon.png) **Kapat'a gidin**.

4. Görüntülenen onay iletişim kutusunda **Aç** veya **Kapat'a** tıklayın.

5. İlke ayrıntıları açılır öğesinde **Kapat'a** tıklayın.

Ana ilke sayfasına döndüğünüzde, ilkenin **Durum** değeri **Açık** veya **Kapalı** olur.

### <a name="set-the-priority-of-custom-anti-malware-policies"></a>Özel kötü amaçlı yazılımdan koruma ilkelerinin önceliğini ayarlama

Varsayılan olarak, kötü amaçlı yazılımdan koruma ilkelerine oluşturuldukları sırayı temel alan bir öncelik verilir (daha yeni ilkeler eski ilkelerden daha düşük önceliklidir). Düşük öncelik numarası, ilke için daha yüksek bir önceliği gösterir (0 en yüksek önceliktir) ve ilkeler öncelik sırasına göre işlenir (yüksek öncelikli ilkeler düşük öncelikli ilkelerden önce işlenir). hiçbir iki ilke aynı önceliğe sahip olamaz ve ilke işleme ilk ilke uygulandıktan sonra durur.

İlkenin önceliğini değiştirmek için, ilkenin özelliklerinde **Önceliği artır** veya **Önceliği azalt'a** tıklayın (Microsoft 365 Defender portalında **Öncelik** numarasını doğrudan değiştiremezsiniz). İlkenin önceliğini değiştirmek yalnızca birden çok ilkeniz varsa mantıklıdır.

 **Notlar**:

- Microsoft 365 Defender portalında, kötü amaçlı yazılımdan koruma ilkesinin önceliğini yalnızca oluşturduktan sonra değiştirebilirsiniz. PowerShell'de, kötü amaçlı yazılım filtresi kuralını oluştururken varsayılan önceliği geçersiz kılabilirsiniz (bu, mevcut kuralların önceliğini etkileyebilir).
- Kötü amaçlı yazılımdan koruma ilkeleri, görüntülenme sırasına göre işlenir (ilk ilkenin **Öncelik** değeri 0'dır). Varsayılan kötü amaçlı yazılımdan koruma ilkesi **En düşük** öncelik değerine sahiptir ve bunu değiştiremezsiniz.

1. konumundaki Microsoft 365 Defender portalında<https://security.microsoft.com>, **İlkeler** bölümünde **e-posta & İşbirliği** \> **İlkeleri & Kurallar** \> **Tehdit İlkeleri** **Kötü Amaçlı Yazılımdan Koruma'ya** \> gidin. **Kötü amaçlı yazılımdan koruma** sayfasına doğrudan gitmek için kullanın<https://security.microsoft.com/antimalwarev2>.

2. **Kötü amaçlı yazılımdan koruma** sayfasında, ada tıklayarak listeden bir özel ilke seçin.

3. Görüntülenen ilke ayrıntıları açılır öğesinin en üstünde, Geçerli öncelik değerine ve özel ilkelerin sayısına göre **Önceliği artır** veya **Önceliği azalt** seçeneğini görürsünüz:
   - **Öncelik** değeri **0** olan ilkede yalnızca **Önceliği azalt** seçeneği kullanılabilir.
   - En düşük **Öncelik** değerine sahip ilke (örneğin, **3**) yalnızca **Önceliği artır** seçeneği kullanılabilir.
   - Üç veya daha fazla ilkeniz varsa, en yüksek ve en düşük öncelik değerleri arasındaki ilkeler hem **Önceliği artır** hem de **Önceliği azalt** seçeneklerine sahiptir.

   Önceliği artır simgesine tıklayın ![.](../../media/m365-cc-sc-increase-icon.png) Öncelik **değerini değiştirmek** için **Önceliği artır** veya ![Önceliği azalt simgesi](../../media/m365-cc-sc-decrease-icon.png) Önceliği **azalt'ı** seçin.

4. İşiniz bittiğinde ilke ayrıntıları açılır öğesinde **Kapat'a** tıklayın.

## <a name="use-the-microsoft-365-defender-portal-to-remove-custom-anti-malware-policies"></a>Özel kötü amaçlı yazılımdan koruma ilkelerini kaldırmak için Microsoft 365 Defender portalını kullanma

Özel bir kötü amaçlı yazılımdan koruma ilkesini kaldırmak için Microsoft 365 Defender portalını kullandığınızda, kötü amaçlı yazılım filtresi kuralı ve ilgili kötü amaçlı yazılım filtresi ilkesi silinir. Varsayılan kötü amaçlı yazılımdan koruma ilkesini kaldıramazsınız.

1. konumundaki Microsoft 365 Defender portalında<https://security.microsoft.com>, **İlkeler** bölümünde **e-posta & İşbirliği** \> **İlkeleri & Kurallar** \> **Tehdit İlkeleri** **Kötü Amaçlı Yazılımdan Koruma'ya** \> gidin. **Kötü amaçlı yazılımdan koruma** sayfasına doğrudan gitmek için kullanın<https://security.microsoft.com/antimalwarev2>.

2. **Kötü amaçlı yazılımdan koruma sayfasında**, ada tıklayarak listeden bir özel ilke seçin.

3. Görüntülenen ilke ayrıntıları açılır öğesinin üst kısmında Diğer eylemler simgesine tıklayın ![.](../../media/m365-cc-sc-more-actions-icon.png) **Diğer eylemler** \> ![İlkeyi sil simgesi **İlkeyi**](../../media/m365-cc-sc-delete-icon.png) sil.

4. Görüntülenen onay iletişim kutusunda **Evet'e** tıklayın.

## <a name="use-exchange-online-powershell-or-standalone-eop-powershell-to-configure-anti-malware-policies"></a>Kötü amaçlı yazılımdan koruma ilkelerini yapılandırmak için Exchange Online PowerShell veya tek başına EOP PowerShell kullanma

PowerShell'deki istenmeyen posta önleme ilkeleri hakkında daha fazla bilgi için bkz. [Microsoft 365 Defender portalında kötü amaçlı yazılımdan koruma ilkeleri ve PowerShell](anti-malware-protection.md#anti-malware-policies-in-the-microsoft-365-defender-portal-vs-powershell).

### <a name="use-powershell-to-create-anti-malware-policies"></a>Kötü amaçlı yazılımdan koruma ilkeleri oluşturmak için PowerShell kullanma

PowerShell'de kötü amaçlı yazılımdan koruma ilkesi oluşturmak iki adımlı bir işlemdir:

1. Kötü amaçlı yazılım filtresi ilkesini oluşturun.
2. Kuralın uygulandığı kötü amaçlı yazılım filtresi ilkesini belirten kötü amaçlı yazılım filtresi kuralını oluşturun.

 **Notlar**:

- Yeni bir kötü amaçlı yazılım filtresi kuralı oluşturabilir ve mevcut, ilişkilendirilmemiş bir kötü amaçlı yazılım filtresi ilkesini atayabilirsiniz. Kötü amaçlı yazılım filtresi kuralı birden fazla kötü amaçlı yazılım filtresi ilkesiyle ilişkilendirilemiyor.
- powershell'deki yeni kötü amaçlı yazılımdan koruma ilkelerinde yapılandırabileceğiniz ve ilkeyi oluşturana kadar Microsoft 365 Defender portalında bulunmayan iki ayar vardır:
  - Yeni ilkeyi devre dışı olarak oluşturun (**New-MalwareFilterRule** cmdlet'inde _etkindir_`$false`).
  - **New-MalwareFilterRule** cmdlet'inde oluşturma sırasında ilkenin _önceliğini_ ayarlayın (Öncelik _\<Number\>_).
- PowerShell'de oluşturduğunuz yeni bir kötü amaçlı yazılım filtresi ilkesi, ilkeyi bir kötü amaçlı yazılım filtresi kuralına atayana kadar Microsoft 365 Defender portalında görünmez.

#### <a name="step-1-use-powershell-to-create-a-malware-filter-policy"></a>1. Adım: Kötü amaçlı yazılım filtresi ilkesi oluşturmak için PowerShell kullanma

Kötü amaçlı yazılım filtresi ilkesi oluşturmak için şu söz dizimlerini kullanın:

```PowerShell
New-MalwareFilterPolicy -Name "<PolicyName>" [-AdminDisplayName "<OptionalComments>"] [-CustomNotifications <$true | $false>] [<Inbound notification options>] [<Outbound notification options>] [-QuarantineTag <QuarantineTagName>]
```

Bu örnek, şu ayarlarla Contoso Kötü Amaçlı Yazılım Filtresi İlkesi adlı yeni bir kötü amaçlı yazılım filtresi ilkesi oluşturur:

- İç gönderenden gelen bir iletide kötü amaçlı yazılım algılandığında admin@contoso.com bildirin.
- Kötü amaçlı yazılım algılamaları için varsayılan [karantina ilkesi](quarantine-policies.md) kullanılır ( _QuarantineTag_ parametresini kullanmıyoruz).

```PowerShell
New-MalwareFilterPolicy -Name "Contoso Malware Filter Policy" -EnableInternalSenderAdminNotifications $true -InternalSenderAdminAddress admin@contoso.com
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz. [New-MalwareFilterPolicy](/powershell/module/exchange/new-malwarefilterpolicy).

#### <a name="step-2-use-powershell-to-create-a-malware-filter-rule"></a>2. Adım: Kötü amaçlı yazılım filtresi kuralı oluşturmak için PowerShell kullanma

Kötü amaçlı yazılım filtresi kuralı oluşturmak için şu söz dizimlerini kullanın:

```PowerShell
New-MalwareFilterRule -Name "<RuleName>" -MalwareFilterPolicy "<PolicyName>" <Recipient filters> [<Recipient filter exceptions>] [-Comments "<OptionalComments>"]
```

Bu örnek, şu ayarlarla Contoso Alıcıları adlı yeni bir kötü amaçlı yazılım filtresi kuralı oluşturur:

- Contoso Kötü Amaçlı Yazılım Filtresi İlkesi adlı kötü amaçlı yazılım filtresi ilkesi kuralla ilişkilendirilir.
- Kural, contoso.com etki alanındaki alıcılar için geçerlidir.

```PowerShell
New-MalwareFilterRule -Name "Contoso Recipients" -MalwareFilterPolicy "Contoso Malware Filter Policy" -RecipientDomainIs contoso.com
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz. [New-MalwareFilterRule](/powershell/module/exchange/new-malwarefilterrule).

### <a name="use-powershell-to-view-malware-filter-policies"></a>Kötü amaçlı yazılım filtresi ilkelerini görüntülemek için PowerShell kullanma

Tüm kötü amaçlı yazılım filtresi ilkelerinin özet listesini döndürmek için şu komutu çalıştırın:

```PowerShell
Get-MalwareFilterPolicy
```

Belirli bir kötü amaçlı yazılım filtresi ilkesi hakkında ayrıntılı bilgi döndürmek için şu söz dizimini kullanın:

```PowerShell
Get-MalwareFilterPolicy -Identity "<PolicyName>" | Format-List [<Specific properties to view>]
```

Bu örnek, Yöneticiler adlı kötü amaçlı yazılım filtresi ilkesinin tüm özellik değerlerini döndürür.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List
```

Bu örnek, aynı ilke için yalnızca belirtilen özellikleri döndürür.

```PowerShell
Get-MalwareFilterPolicy -Identity "Executives" | Format-List Action,AdminDisplayName,CustomNotifications,Enable*Notifications
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz. [Get-MalwareFilterPolicy](/powershell/module/exchange/get-malwarefilterpolicy).

### <a name="use-powershell-to-view-malware-filter-rules"></a>Kötü amaçlı yazılım filtresi kurallarını görüntülemek için PowerShell kullanma

Tüm kötü amaçlı yazılım filtresi kurallarının özet listesini döndürmek için şu komutu çalıştırın:

```PowerShell
Get-MalwareFilterRule
```

Listeyi etkin veya devre dışı kurallara göre filtrelemek için aşağıdaki komutları çalıştırın:

```PowerShell
Get-MalwareFilterRule -State Disabled
```

```PowerShell
Get-MalwareFilterRule -State Enabled
```

Belirli bir kötü amaçlı yazılım filtresi kuralı hakkında ayrıntılı bilgi döndürmek için şu sözdizimini kullanın:

```PowerShell
Get-MalwareFilterRule -Identity "<RuleName>" | Format-List [<Specific properties to view>]
```

Bu örnek, Yöneticiler adlı kötü amaçlı yazılım filtresi kuralının tüm özellik değerlerini döndürür.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List
```

Bu örnek yalnızca aynı kural için belirtilen özellikleri döndürür.

```PowerShell
Get-MalwareFilterRule -Identity "Executives" | Format-List Name,Priority,State,MalwareFilterPolicy,*Is,*SentTo,*MemberOf
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz. [Get-MalwareFilterRule](/powershell/module/exchange/get-malwarefilterrule).

### <a name="use-powershell-to-modify-malware-filter-policies"></a>Kötü amaçlı yazılım filtresi ilkelerini değiştirmek için PowerShell kullanma

Aşağıdaki öğeler dışında, PowerShell'de bir kötü amaçlı yazılım filtresi ilkesini değiştirdiğinizde, ilkeyi [1. Adım: PowerShell'i kullanarak bu makalenin önceki bölümlerinde açıklanan kötü amaçlı yazılım filtresi ilkesi oluşturma](#step-1-use-powershell-to-create-a-malware-filter-policy) bölümünde açıklandığı gibi aynı ayarlar kullanılabilir.

- Belirtilen ilkeyi varsayılan ilkeye dönüştüren _MakeDefault_ anahtarı (herkese uygulanır, değiştirilemez **En düşük** öncelik ve bunu silemezsiniz) yalnızca PowerShell'de kötü amaçlı yazılım filtresi ilkesini değiştirdiğinizde kullanılabilir.
- Kötü amaçlı yazılım filtresi ilkesini yeniden adlandıramazsınız ( **Set-MalwareFilterPolicy** cmdlet'inde _Name_ parametresi yoktur). Microsoft 365 Defender portalında kötü amaçlı yazılımdan koruma ilkesini yeniden adlandırdığınızda, yalnızca kötü amaçlı yazılım filtresi _kuralını_ yeniden adlandırırsınız.

Kötü amaçlı yazılım filtresi ilkesini değiştirmek için şu söz dizimlerini kullanın:

```PowerShell
Set-MalwareFilterPolicy -Identity "<PolicyName>" <Settings>
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz. [Set-MalwareFilterPolicy](/powershell/module/exchange/set-malwarefilterpolicy).

> [!NOTE]
> Kötü amaçlı yazılım filtresi [ilkesinde kullanılacak karantina ilkesini](quarantine-policies.md) belirtmeye yönelik ayrıntılı yönergeler için bkz. Kötü [amaçlı yazılımdan koruma ilkelerinde karantina ilkesini belirtmek için PowerShell kullanma](quarantine-policies.md#anti-malware-policies-in-powershell).

### <a name="use-powershell-to-modify-malware-filter-rules"></a>Kötü amaçlı yazılım filtresi kurallarını değiştirmek için PowerShell kullanma

PowerShell'de kötü amaçlı yazılım filtresi kuralını değiştirdiğinizde kullanılamayabilecek tek ayar, devre dışı bırakılmış bir kural oluşturmanıza olanak tanıyan _Enabled_ parametresidir. Mevcut kötü amaçlı yazılım filtresi kurallarını etkinleştirmek veya devre dışı bırakmak için sonraki bölüme bakın.

Aksi takdirde, PowerShell'de bir kötü amaçlı yazılım filtresi kuralını değiştirdiğinizde ek ayar kullanılamaz. Bu makalenin önceki bölümlerinde yer alan [2. Adım: PowerShell kullanarak kötü amaçlı yazılım filtresi kuralı oluşturma](#step-2-use-powershell-to-create-a-malware-filter-rule) bölümünde açıklandığı gibi bir kural oluşturduğunuzda da aynı ayarlar kullanılabilir.

Kötü amaçlı yazılım filtresi kuralını değiştirmek için şu söz dizimlerini kullanın:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" <Settings>
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz [. Set-MalwareFilterRule](/powershell/module/exchange/set-malwarefilterrule).

### <a name="use-powershell-to-enable-or-disable-malware-filter-rules"></a>Kötü amaçlı yazılım filtresi kurallarını etkinleştirmek veya devre dışı bırakmak için PowerShell kullanma

PowerShell'de bir kötü amaçlı yazılım filtresi kuralının etkinleştirilmesi veya devre dışı bırakılması, kötü amaçlı yazılımdan koruma ilkesinin tamamını (kötü amaçlı yazılım filtresi kuralı ve atanan kötü amaçlı yazılım filtresi ilkesi) etkinleştirir veya devre dışı bırakır. Varsayılan kötü amaçlı yazılımdan koruma ilkesini etkinleştiremez veya devre dışı bırakamazsınız (her zaman tüm alıcılara uygulanır).

PowerShell'de kötü amaçlı yazılım filtresi kuralını etkinleştirmek veya devre dışı bırakmak için şu sözdizimini kullanın:

```PowerShell
<Enable-MalwareFilterRule | Disable-MalwareFilterRule> -Identity "<RuleName>"
```

Bu örnek, Pazarlama Departmanı adlı kötü amaçlı yazılım filtresi kuralını devre dışı bırakır.

```PowerShell
Disable-MalwareFilterRule -Identity "Marketing Department"
```

Bu örnek aynı kuralı etkinleştirir.

```PowerShell
Enable-MalwareFilterRule -Identity "Marketing Department"
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz [. Enable-MalwareFilterRule](/powershell/module/exchange/enable-malwarefilterrule) ve [Disable-MalwareFilterRule](/powershell/module/exchange/disable-malwarefilterrule).

### <a name="use-powershell-to-set-the-priority-of-malware-filter-rules"></a>Kötü amaçlı yazılım filtresi kurallarının önceliğini ayarlamak için PowerShell kullanma

Bir kuralda ayarlayabileceğiniz en yüksek öncelik değeri 0'dır. Ayarlayabileceğiniz en düşük değer, kural sayısına bağlıdır. Örneğin, beş kuralınız varsa, 0 ile 4 arasında öncelik değerlerini kullanabilirsiniz. Mevcut bir kuralın önceliğini değiştirmek, diğer kurallar üzerinde basamaklı bir etkiye sahip olabilir. Örneğin, beş özel kuralınız (öncelik 0 ile 4 arasında) varsa ve bir kuralın önceliğini 2 olarak değiştirirseniz, 2 önceliği olan mevcut kural öncelik 3'e, öncelik 3'e sahip kural ise öncelik 4 olarak değiştirilir.

PowerShell'de kötü amaçlı yazılım filtresi kuralının önceliğini ayarlamak için aşağıdaki söz dizimini kullanın:

```PowerShell
Set-MalwareFilterRule -Identity "<RuleName>" -Priority <Number>
```

Bu örnek, Pazarlama Departmanı adlı kuralın önceliğini 2 olarak ayarlar. Önceliğe 2'den küçük veya 2'ye eşit olan tüm mevcut kurallar 1 azaltılır (öncelik sayıları 1 artırılır).

```PowerShell
Set-MalwareFilterRule -Identity "Marketing Department" -Priority 2
```

**Notlar**:

- Yeni kuralı oluştururken önceliği ayarlamak için, bunun yerine **New-MalwareFilterRule** cmdlet'indeki _Priority_ parametresini kullanın.
- Varsayılan kötü amaçlı yazılım filtresi ilkesinin karşılık gelen bir kötü amaçlı yazılım filtresi kuralı yoktur ve her zaman **değiştirilemez öncelik değeri En Düşük'e** sahiptir.

### <a name="use-powershell-to-remove-malware-filter-policies"></a>Kötü amaçlı yazılım filtresi ilkelerini kaldırmak için PowerShell kullanma

Kötü amaçlı yazılım filtresi ilkesini kaldırmak için PowerShell kullandığınızda ilgili kötü amaçlı yazılım filtresi kuralı kaldırılmaz.

PowerShell'de kötü amaçlı yazılım filtresi ilkesini kaldırmak için şu sözdizimini kullanın:

```PowerShell
Remove-MalwareFilterPolicy -Identity "<PolicyName>"
```

Bu örnek, Pazarlama Departmanı adlı kötü amaçlı yazılım filtresi ilkesini kaldırır.

```PowerShell
Remove-MalwareFilterPolicy -Identity "Marketing Department"
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz [. Remove-MalwareFilterPolicy](/powershell/module/exchange/remove-malwarefilterpolicy).

### <a name="use-powershell-to-remove-malware-filter-rules"></a>Kötü amaçlı yazılım filtresi kurallarını kaldırmak için PowerShell kullanma

Kötü amaçlı yazılım filtresi kuralını kaldırmak için PowerShell kullandığınızda ilgili kötü amaçlı yazılım filtresi ilkesi kaldırılmaz.

PowerShell'de kötü amaçlı yazılım filtresi kuralını kaldırmak için şu sözdizimini kullanın:

```PowerShell
Remove-MalwareFilterRule -Identity "<PolicyName>"
```

Bu örnek, Pazarlama Departmanı adlı kötü amaçlı yazılım filtresi kuralını kaldırır.

```PowerShell
Remove-MalwareFilterRule -Identity "Marketing Department"
```

Ayrıntılı söz dizimi ve parametre bilgileri için bkz [. Remove-MalwareFilterRule](/powershell/module/exchange/remove-malwarefilterrule).

## <a name="how-do-you-know-these-procedures-worked"></a>Bu yordamların işe yaramış olduğunu nasıl anlarsınız?

### <a name="use-the-eicartxt-file-to-verify-your-anti-malware-policy-settings"></a>Kötü amaçlı yazılımdan koruma ilkesi ayarlarınızı doğrulamak için EICAR.TXT dosyasını kullanın

> [!IMPORTANT]
> EICAR.TXT dosyası bir virüs değil. Avrupa Bilgisayar Virüsten Koruma Araştırma Enstitüsü (EICAR), virüsten koruma yüklemelerini ve ayarlarını güvenli bir şekilde test etmek için bu dosyayı geliştirdi.

1. Not Defteri'ni açın ve aşağıdaki metni boş bir dosyaya yapıştırın:

   ```Text
   X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*
   ```

   Dosyadaki tek metin karakterlerinin bunlar olduğundan emin olun. Dosya boyutu 68 bayt olmalıdır.

2. Dosyayı EICAR.TXT olarak kaydetme

   Masaüstü virüsten koruma programınızda, EICAR.TXT taramadan hariç tutmayı unutmayın (aksi takdirde dosya karantinaya alınır).

3. EICAR.TXT dosyasını otomatik olarak engellemeyen bir e-posta istemcisi kullanarak ve giden istenmeyen postaları otomatik olarak engellemeyen bir e-posta hizmeti kullanarak ek olarak EICAR.TXT dosyasını içeren bir e-posta iletisi gönderin. Test etmek için aşağıdaki senaryoları belirlemek için kötü amaçlı yazılımdan koruma ilkesi ayarlarınızı kullanın:
   - bir iç posta kutusundan iç alıcıya e-posta.
   - bir iç posta kutusundan dış alıcıya e-posta.
   - Dış posta kutusundan iç alıcıya e-posta.

4. İletinin karantinaya alındığını doğrulayın ve kötü amaçlı yazılımdan koruma ilkesi ayarlarınıza göre yönetici bildirimi sonuçlarını doğrulayın. Örneğin, belirttiğiniz yönetici e-posta adresi, varsayılan veya özelleştirilmiş bildirim iletileriyle birlikte iç veya dış ileti gönderenler için bildirilir.

5. Testiniz tamamlandıktan sonra EICAR.TXT dosyasını silin (böylece diğer kullanıcılar bu dosya tarafından gereksiz şekilde alarma geçmesin).
